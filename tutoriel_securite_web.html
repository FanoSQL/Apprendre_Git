<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√©curit√© des Applications Web | Css Manager</title>
    <style>
        /* --- CSS GLOBAL --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.7;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 40px;
            overflow-x: auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
        }

        .toc {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 40px;
            border-left: 5px solid #667eea;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .toc h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }

        .toc li {
            margin-bottom: 10px;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toc a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 40px;
            border-left: 5px solid #764ba2;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-number {
            background: #764ba2;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }

        code {
            background: #2d2d2d;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        .tip {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .tip strong {
            color: #1565C0;
        }

        .warning {
            background: #fff3e0;
            border-left: 4px solid #FF9800;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .warning strong {
            color: #E65100;
        }

        .note {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .note strong {
            color: #2E7D32;
        }

        .exercise {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .exercise h3 {
            color: #ff9800;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px dashed #ccc;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            h1 {
                font-size: 2rem;
            }
            .subtitle {
                font-size: 1rem;
            }
            .toc {
                padding: 15px;
            }
            .section {
                padding: 20px;
            }
            pre {
                font-size: 0.85rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí S√©curit√© des Applications Web</h1>
            <p class="subtitle">Bonnes Pratiques pour D√©veloppeurs D√©butants et Interm√©diaires</p>
        </header>

        <div class="toc">
            <h2>üìã Sommaire</h2>
            <ul>
                <li><a href="#intro"><span class="section-number">1</span> Introduction √† la S√©curit√© Web</a></li>
                <li><a href="#principes"><span class="section-number">2</span> Principes de Base</a></li>
                <li><a href="#vulnerabilites"><span class="section-number">3</span> Vuln√©rabilit√©s Courantes (OWASP Top 10)</a></li>
                <li><a href="#bonnes_pratiques"><span class="section-number">4</span> Bonnes Pratiques de D√©veloppement</a></li>
                <li><a href="#php"><span class="section-number">5</span> S√©curit√© en PHP (mysqli, PDO)</a></li>
                <li><a href="#javascript"><span class="section-number">6</span> S√©curit√© en JavaScript (DOM)</a></li>
                <li><a href="#exemples"><span class="section-number">7</span> Exemples Concrets de Code S√©curis√©</a></li>
                <li><a href="#exercices"><span class="section-number">8</span> Exercices Pratiques</a></li>
            </ul>
        </div>

        <div class="section" id="intro">
            <h2><span class="section-number">1</span> üìò Introduction √† la S√©curit√© Web</h2>
            <p>La **s√©curit√© des applications web** est une **comp√©tence essentielle** pour tout d√©veloppeur. Une application mal s√©curis√©e peut √™tre victime de :</p>
            <ul>
                <li>Vol de donn√©es (identifiants, mots de passe, informations bancaires).</li>
                <li>Injection de code malveillant.</li>
                <li>Atteinte √† la r√©putation de l'entreprise.</li>
                <li>Sanctions l√©gales (RGPD).</li>
            </ul>
            <div class="tip">
                <strong>üí° Objectif :</strong> Apprendre √† **concevoir** et **d√©velopper** des applications **r√©sistantes aux attaques**.
            </div>
        </div>

        <div class="section" id="principes">
            <h2><span class="section-number">2</span> üß† Principes de Base</h2>
            <p>Les principes fondamentaux de la s√©curit√© sont :</p>
            <ul>
                <li><strong>Confidentialit√©</strong> : Seules les personnes autoris√©es peuvent acc√©der aux donn√©es.</li>
                <li><strong>Int√©grit√©</strong> : Les donn√©es ne peuvent √™tre modifi√©es par des personnes non autoris√©es.</li>
                <li><strong>Disponibilit√©</strong> : Le service est accessible aux utilisateurs autoris√©s quand ils en ont besoin.</li>
            </ul>
        </div>

        <div class="section" id="vulnerabilites">
            <h2><span class="section-number">3</span> üö® Vuln√©rabilit√©s Courantes (OWASP Top 10)</h2>
            <p>L'OWASP (Open Web Application Security Project) publie une liste des 10 principales vuln√©rabilit√©s :</p>
            <table>
                <thead>
                    <tr>
                        <th>Classement</th>
                        <th>Nom</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Injection</td>
                        <td>Donn√©es non fiables sont envoy√©es √† un interpr√©teur (ex: <strong>injection SQL</strong>).</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Failles d'authentification</td>
                        <td>Probl√®mes dans la gestion des sessions, des mots de passe.</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Exposition de donn√©es sensibles</td>
                        <td>Donn√©es non chiffr√©es ou mal prot√©g√©es.</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>XML External Entities (XXE)</td>
                        <td>Attaques par entit√©s XML externes.</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Broken Access Control</td>
                        <td>Utilisateurs acc√®dent √† des ressources non autoris√©es.</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Security Misconfiguration</td>
                        <td>Param√®tres par d√©faut ou erreurs de configuration.</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Cross-Site Scripting (XSS)</td>
                        <td>Injection de scripts dans la page (c√¥t√© client).</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Insecure Deserialization</td>
                        <td>Probl√®mes lors de la conversion d'objets en cha√Ænes et vice-versa.</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Using Components with Known Vulnerabilities</td>
                        <td>Utilisation de biblioth√®ques ou frameworks obsol√®tes.</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>Insufficient Logging & Monitoring</td>
                        <td>Manque de journalisation pour d√©tecter les attaques.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section" id="bonnes_pratiques">
            <h2><span class="section-number">4</span> ‚úÖ Bonnes Pratiques de D√©veloppement</h2>
            <ul>
                <li><strong>Valider et filtrer</strong> toutes les donn√©es entrantes (formulaire, URL, cookies).</li>
                <li><strong>Utiliser des requ√™tes pr√©par√©es</strong> (mysqli/PDO) pour √©viter les injections SQL.</li>
                <li><strong>√âchapper les donn√©es</strong> sortantes (affichage dans HTML) avec <b>htmlspecialchars()</b>.</li>
                <li><strong>Utiliser des sessions s√©curis√©es</strong> (jeton CSRF, expiration).</li>
                <li><strong>Ne jamais stocker de mot de passe en clair</strong> (utiliser <b>password_hash()</b> et <b>password_verify()</b>).</li>
                <li><strong>Ne jamais exposer de donn√©es sensibles</strong> dans le code source ou les logs.</li>
                <li><strong>Mettre √† jour r√©guli√®rement</strong> les biblioth√®ques et frameworks utilis√©s.</li>
                <li><strong>Journaliser les actions importantes</strong> (connexions, erreurs, modifications).</li>
            </ul>
        </div>

        <div class="section" id="php">
            <h2><span class="section-number">5</span> üêò S√©curit√© en PHP (mysqli, PDO)</h2>

            <h3>üîí Injection SQL</h3>
            <div class="tip">
                <strong>‚úÖ Solution : Requ√™tes pr√©par√©es</strong>
            </div>
            <pre><code>// --- MAUVAIS ---
$sql = "SELECT * FROM users WHERE email = '".$_POST['email']."'"; // ‚ùå DANGEREUX
$result = mysqli_query($conn, $sql);

// --- BON AVEC MYSQLI ---
$email = $_POST['email'];
$stmt = $conn->prepare("SELECT * FROM users WHERE email = ?"); // ? = placeholder
$stmt->bind_param("s", $email); // "s" = string
$stmt->execute();
$result = $stmt->get_result();

// --- BON AVEC PDO ---
$stmt = $pdo->prepare("SELECT * FROM users WHERE email = :email");
$stmt->bindParam(':email', $email);
$stmt->execute();
$result = $stmt->fetchAll();</code></pre>

            <h3>üõ°Ô∏è XSS (Cross-Site Scripting)</h3>
            <div class="tip">
                <strong>‚úÖ Solution : √âchappement des sorties HTML</strong>
            </div>
            <pre><code>// --- MAUVAIS ---
echo "Bonjour " . $_POST['nom']; // ‚ùå Si l'utilisateur entre '<b> " script >" alert('XSS')</b> " / script"'

// --- BON ---
echo "Bonjour " . htmlspecialchars($_POST['nom']); // ‚úÖ √âchappe les caract√®res sp√©ciaux</code></pre>

            <h3>üîê Authentification</h3>
            <pre><code>// --- Stocker le mot de passe ---
$motDePasse = $_POST['password'];
$motDePasseHashe = password_hash($motDePasse, PASSWORD_DEFAULT);

// --- V√©rifier le mot de passe ---
$motDePasseSaisi = $_POST['password'];
if (password_verify($motDePasseSaisi, $motDePasseHashe)) {
    // Connexion r√©ussie
}</code></pre>
        </div>

        <div class="section" id="javascript">
            <h2><span class="section-number">6</span> üåê S√©curit√© en JavaScript (DOM)</h2>

            <h3>üõ°Ô∏è XSS via le DOM</h3>
            <div class="tip">
                <strong>‚úÖ Solution : Ne jamais injecter du HTML brut</strong>
            </div>
            <pre><code>// --- MAUVAIS ---
let userInput = '<b>alert("XSS")</b>';
document.getElementById('output').innerHTML = userInput; // ‚ùå DANGEREUX

// --- BON ---
document.getElementById('output').textContent = userInput; // ‚úÖ Affiche le HTML comme du texte</code></pre>

            <h3>üîí Gestion des Tokens (CSRF)</h3>
            <p>Utilisez des tokens CSRF pour valider les formulaires.

                C'est comme un **mot de passe unique** pour **chaque formulaire ou requ√™te**.
            </p>
            <pre><code><!-- G√©n√©r√© c√¥t√© PHP -->
<input type="hidden" name="csrf_token" value="<?php echo $_SESSION['csrf_token']; ?>">
------- STEPHANE  ----------
(G√©n√©rer un UUID our rendre le formulaire unique + rendre ce UUID TOKEN et COMPARER)
function generateUUID() {
    return sprintf('%04x%04x-%04x-%04x-%04x-%04x%04x%04x',
        mt_rand(0, 0xffff), mt_rand(0, 0xffff),
        mt_rand(0, 0xffff),
        mt_rand(0, 0x0fff) | 0x4000,
        mt_rand(0, 0x3fff) | 0x8000,
        mt_rand(0, 0xffff), mt_rand(0, 0xffff), mt_rand(0, 0xffff)
    );
}

echo generateUUID(); // Ex: 550e8400-e29b-41d4-a716-446655440000


---------------------------



<script>
// V√©rifier le token avant d'envoyer via fetch ou AJAX
const token = document.querySelector('[name="csrf_token"]').value;
fetch('/api/action', {
    method: 'POST',
    headers: { 'X-CSRF-Token': token },
    body: formData
});
</script></code></pre>
        </div>

        <div class="section" id="exemples">
            <h2><span class="section-number">7</span> üß™ Exemples Concrets de Code S√©curis√©</h2>

            <h3>Exemple 1 : Formulaire de Contact S√©curis√© (PHP + HTML)</h3>
            <pre><code><form method="POST">
    <input type="text" name="nom" required>
    <input type="email" name="email" required>
    <textarea name="message" required></textarea>
    <button type="submit">Envoyer</button>
</form>

<?php
if ($_POST) {
    $nom = htmlspecialchars(trim($_POST['nom']));
    $email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);
    $message = htmlspecialchars(trim($_POST['message']));

    if ($email) {
        // Enregistrer dans la base avec une requ√™te pr√©par√©e
        $stmt = $pdo->prepare("INSERT INTO messages (nom, email, message) VALUES (?, ?, ?)");
        $stmt->execute([$nom, $email, $message]);
        echo "‚úÖ Message envoy√© !";
    } else {
        echo "‚ùå Email invalide.";
    }
}
?></code></pre>

            <h3>Exemple 2 : Gestion de Panier avec Validation (JavaScript)</h3>
            <pre><code>function ajouterAuPanier(idProduit) {
    // V√©rifier que l'ID est un nombre
    if (isNaN(idProduit)) {
        alert("ID de produit invalide.");
        return;
    }

    fetch('/api/panier.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ id: idProduit })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("Produit ajout√© au panier.");
        } else {
            alert("Erreur : " + data.message);
        }
    });
}</code></pre>
        </div>

        <div class="section" id="exercices">
            <h2><span class="section-number">8</span> üìù Exercices Pratiques</h2>

            <div class="exercise">
                <h3>Exercice 1 : Formulaire d'inscription s√©curis√©</h3>
                <p>Cr√©ez un formulaire PHP/HTML avec champs nom, email, mot de passe. Validez les donn√©es, hachez le mot de passe et enregistrez-les dans une base via une requ√™te pr√©par√©e.</p>
            </div>

            <div class="exercise">
                <h3>Exercice 2 : Emp√™cher les attaques XSS</h3>
                <p>Cr√©ez une page qui affiche une variable PHP dans une page HTML. Utilisez <b>htmlspecialchars()</b> pour emp√™cher les attaques XSS.</p>
            </div>

            <div class="exercise">
                <h3>Exercice 3 : Validation de donn√©es c√¥t√© client</h3>
                <p>Utilisez JavaScript pour valider un email et une quantit√© positive dans un formulaire avant envoi.</p>
            </div>

            <div class="exercise">
                <h3>Exercice 4 : Gestion de session</h3>
                <p>Cr√©ez une page PHP qui v√©rifie si un utilisateur est connect√© via une session. Redirigez-le vers la page de login s'il ne l'est pas.</p>
            </div>

            <div class="exercise">
                <h3>Exercice 5 : Journalisation des erreurs</h3>
                <p>Cr√©ez un script PHP qui enregistre les erreurs dans un fichier <b>log.txt</b> avec l'heure et la nature de l'erreur.</p>
            </div>
        </div>

        <footer>
            <p>¬©  St√©phane MONTET 2024 - Css Manager - Plateforme √âducative pour √âtudiants</p>
            <p>Ma√Ætrisez la s√©curit√© web pour des applications robustes et fiables !</p>
        </footer>
    </div>
</body>
</html>